{"version":3,"file":"workflowHistory.mjs","names":[],"sources":["../src/api/workflowHistory.ts"],"sourcesContent":["import type { IConnections, INode } from 'n8n-workflow';\n\nimport type { IRestApiContext } from '../types';\nimport { get, post } from '../utils';\n\nexport type WorkflowHistory = {\n\tversionId: string;\n\tauthors: string;\n\tcreatedAt: string;\n\tupdatedAt: string;\n\tworkflowPublishHistory: WorkflowPublishHistory[];\n\tname: string | null;\n\tdescription: string | null;\n};\n\nexport type WorkflowPublishHistory = {\n\tcreatedAt: string;\n\tid: number;\n\tevent: 'activated' | 'deactivated';\n\tuserId: string | null;\n\tversionId: string;\n\tworkflowId: string;\n};\n\nexport type WorkflowVersionId = WorkflowHistory['versionId'];\n\nexport type WorkflowVersion = WorkflowHistory & {\n\tworkflowId: string;\n\tnodes: INode[];\n\tconnections: IConnections;\n};\n\nexport type WorkflowHistoryActionTypes = Array<\n\t'restore' | 'publish' | 'unpublish' | 'clone' | 'open' | 'download'\n>;\n\nexport type WorkflowHistoryRequestParams = { take: number; skip?: number };\n\nexport const getWorkflowHistory = async (\n\tcontext: IRestApiContext,\n\tworkflowId: string,\n\tqueryParams: WorkflowHistoryRequestParams,\n): Promise<WorkflowHistory[]> => {\n\tconst { data } = await get(\n\t\tcontext.baseUrl,\n\t\t`/workflow-history/workflow/${workflowId}`,\n\t\tqueryParams,\n\t);\n\treturn data;\n};\n\nexport const getWorkflowVersion = async (\n\tcontext: IRestApiContext,\n\tworkflowId: string,\n\tversionId: string,\n): Promise<WorkflowVersion> => {\n\tconst { data } = await get(\n\t\tcontext.baseUrl,\n\t\t`/workflow-history/workflow/${workflowId}/version/${versionId}`,\n\t);\n\treturn data;\n};\n\nexport const getWorkflowVersionsByIds = async (\n\tcontext: IRestApiContext,\n\tworkflowId: string,\n\tversionIds: string[],\n): Promise<{ versions: Array<{ versionId: string; createdAt: string }> }> => {\n\tconst { data } = await post(\n\t\tcontext.baseUrl,\n\t\t`/workflow-history/workflow/${workflowId}/versions`,\n\t\t{ versionIds },\n\t);\n\treturn data;\n};\n"],"mappings":";;;AAsCA,MAAa,qBAAqB,OACjC,SACA,YACA,gBACgC;CAChC,MAAM,EAAE,SAAS,MAAM,IACtB,QAAQ,SACR,8BAA8B,cAC9B,YACA;AACD,QAAO;;AAGR,MAAa,qBAAqB,OACjC,SACA,YACA,cAC8B;CAC9B,MAAM,EAAE,SAAS,MAAM,IACtB,QAAQ,SACR,8BAA8B,WAAW,WAAW,YACpD;AACD,QAAO;;AAGR,MAAa,2BAA2B,OACvC,SACA,YACA,eAC4E;CAC5E,MAAM,EAAE,SAAS,MAAM,KACtB,QAAQ,SACR,8BAA8B,WAAW,YACzC,EAAE,YAAY,CACd;AACD,QAAO"}